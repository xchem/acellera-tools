<tool id="Parameterize" name="Parameterize" version="0.1.0" python_template_version="3.5">
    <requirements>
        <requirement type="package">parameterize</requirement>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[
        ln -s '$molecule' mymol.mol2 &&

        #if  $charge
        -c $charge
        #end if

        parameterize --no-dihed --charge-type Gasteiger --seed 01 mymol.mol2
    ]]>
    </command>

    <inputs>
        <param type="data" name="molecule" format="mol2" />
        <param name="charge" type="integer" optional="true" label="Global charge. Defauls to sum of partial charges."/>
    </inputs>
    <outputs>
        <data name="molout" format="mol2" from_work_dir="parameters/GAFF2/mol.mol2" />
        <data name="frcmod" format="frcmod" from_work_dir="parameters/GAFF2/mol.frcmod" />
        <data name="energies" format="txt" from_work_dir="parameters/GAFF2/energies.txt" />

    </outputs>
    <tests>
        <test>
            <param name="molecule" value="nilotinib.mol2"/>
            <output name="molout" file="mytest.mol2" compare="sim_size"/>
        </test>
    </tests>
    <help><![CDATA[
    Generates a .frcmod file for a given molecule provided as .mol2 file. This .frcmod file can be then used to build a ligand-protein system and run MD simulations.
        

    Check license conditions at: https://software.acellera.com/news/license.pdf

    A molecule in mol2 file format must be provided. The global charge can be also especified as an integer. If left empty, the sum of partial charges will be used.

    ]]></help>


    <citations>
        <citation type="doi">10.1021/acs.jcim.9b00439</citation>
    </citations>

</tool>
