<tool id="Parameterize" name="Parameterize" version="0.1.0" python_template_version="3.5">
    <requirements>
        <requirement type="package" version="0.1">_libgcc_mutex</requirement>
        <requirement type="package" version="4.5">_openmp_mutex</requirement>
        <requirement type="package" version="16.16.0">ambermini</requirement>
        <requirement type="package" version="0.3">ambit</requirement>
        <requirement type="package" version="1.4.0">atomicwrites</requirement>
        <requirement type="package" version="19.3.0">attrs</requirement>
        <requirement type="package" version="1.0">blas</requirement>
        <requirement type="package" version="1.72.0">boost</requirement>
        <requirement type="package" version="1.72.0">boost-cpp</requirement>
        <requirement type="package" version="1.0.8">bzip2</requirement>
        <requirement type="package" version="2020.4.5.2">ca-certificates</requirement>
        <requirement type="package" version="1.16.0">cairo</requirement>
        <requirement type="package" version="2020.4.5.2">certifi</requirement>
        <requirement type="package" version="1.8.9">chemps2</requirement>
        <requirement type="package" version="0.10.0">cycler</requirement>
        <requirement type="package" version="0.29.20">cython</requirement>
        <requirement type="package" version="0.6">dataclasses</requirement>
        <requirement type="package" version="1.13.6">dbus</requirement>
        <requirement type="package" version="4.4.2">decorator</requirement>
        <requirement type="package" version="3.3.0">deepdiff</requirement>
        <requirement type="package" version="3.2.0">dftd3</requirement>
        <requirement type="package" version="1.2">dkh</requirement>
        <requirement type="package" version="2.2.9">expat</requirement>
        <requirement type="package" version="0.1.1">ffevaluation</requirement>
        <requirement type="package" version="3.3.4">fftw3f</requirement>
        <requirement type="package" version="2.13.1">fontconfig</requirement>
        <requirement type="package" version="2.10.2">freetype</requirement>
        <requirement type="package" version="1.3.1">gau2grid</requirement>
        <requirement type="package" version="2.2.6">gdma</requirement>
        <requirement type="package" version="0.19.8.1">gettext</requirement>
        <requirement type="package" version="2.64.3">glib</requirement>
        <requirement type="package" version="1.14.5">gst-plugins-base</requirement>
        <requirement type="package" version="1.14.5">gstreamer</requirement>
        <requirement type="package" version="1.10.2">hdf5</requirement>
        <requirement type="package" version="64.2">icu</requirement>
        <requirement type="package" version="1.6.1">importlib-metadata</requirement>
        <requirement type="package" version="1.6.1">importlib_metadata</requirement>
        <requirement type="package" version="2019.4">intel-openmp</requirement>
        <requirement type="package" version="0.15.1">joblib</requirement>
        <requirement type="package" version="0.2.3">jobqueues</requirement>
        <requirement type="package" version="9d">jpeg</requirement>
        <requirement type="package" version="0.9.6">jsonpickle</requirement>
        <requirement type="package" version="1.2.0">kiwisolver</requirement>
        <requirement type="package" version="9.0.1">libclang</requirement>
        <requirement type="package" version="3.2.1">libffi</requirement>
        <requirement type="package" version="7.2.0">libgcc</requirement>
        <requirement type="package" version="9.2.0">libgcc-ng</requirement>
        <requirement type="package" version="3.0.0">libgfortran</requirement>
        <requirement type="package" version="7.5.0">libgfortran-ng</requirement>
        <requirement type="package" version="9.2.0">libgomp</requirement>
        <requirement type="package" version="1.15">libiconv</requirement>
        <requirement type="package" version="1.2.1">libint</requirement>
        <requirement type="package" version="8.0.1">libllvm8</requirement>
        <requirement type="package" version="9.0.1">libllvm9</requirement>
        <requirement type="package" version="1.6.37">libpng</requirement>
        <requirement type="package" version="9.2.0">libstdcxx-ng</requirement>
        <requirement type="package" version="4.1.0">libtiff</requirement>
        <requirement type="package" version="2.32.1">libuuid</requirement>
        <requirement type="package" version="1.1.0">libwebp-base</requirement>
        <requirement type="package" version="4.3.4">libxc</requirement>
        <requirement type="package" version="1.13">libxcb</requirement>
        <requirement type="package" version="0.10.0">libxkbcommon</requirement>
        <requirement type="package" version="2.9.10">libxml2</requirement>
        <requirement type="package" version="0.32.1">llvmlite</requirement>
        <requirement type="package" version="1.8.3">lz4-c</requirement>
        <requirement type="package" version="0.0.6">match</requirement>
        <requirement type="package" version="3.2.1">matplotlib</requirement>
        <requirement type="package" version="3.2.1">matplotlib-base</requirement>
        <requirement type="package" version="2019.4">mkl</requirement>
        <requirement type="package" version="2.3.0">mkl-service</requirement>
        <requirement type="package" version="1.1.0">mkl_fft</requirement>
        <requirement type="package" version="1.1.0">mkl_random</requirement>
        <requirement type="package" version="0.3.1">moleculekit</requirement>
        <requirement type="package" version="8.3.0">more-itertools</requirement>
        <requirement type="package" version="7.0.1">natsort</requirement>
        <requirement type="package" version="6.1">ncurses</requirement>
        <requirement type="package" version="2.4">networkx</requirement>
        <requirement type="package" version="2.6.1">nlopt</requirement>
        <requirement type="package" version="4.25">nspr</requirement>
        <requirement type="package" version="3.47">nss</requirement>
        <requirement type="package" version="0.49.1">numba</requirement>
        <requirement type="package" version="1.18.1">numpy</requirement>
        <requirement type="package" version="1.18.1">numpy-base</requirement>
        <requirement type="package" version="0.46">olefile</requirement>
        <requirement type="package" version="7.4.1">openmm</requirement>
        <requirement type="package" version="1.1.1g">openssl</requirement>
        <requirement type="package" version="20.4">packaging</requirement>
        <requirement type="package" version="0.25.3">pandas</requirement>
        <requirement type="package" version="1.1.1">parameterize</requirement>
        <requirement type="package" version="3.2.0">parmed</requirement>
        <requirement type="package" version="1.2.1">pcmsolver</requirement>
        <requirement type="package" version="8.44">pcre</requirement>
        <requirement type="package" version="7.1.2">pillow</requirement>
        <requirement type="package" version="0.7.2">pint</requirement>
        <requirement type="package" version="20.0.2">pip</requirement>
        <requirement type="package" version="0.38.0">pixman</requirement>
        <requirement type="package" version="0.13.1">pluggy</requirement>
        <requirement type="package" version="0.3.0">protocolinterface</requirement>
        <requirement type="package" version="1.3.2+ecbda83">psi4</requirement>
        <requirement type="package" version="5.7.0">psutil</requirement>
        <requirement type="package" version="0.4">pthread-stubs</requirement>
        <requirement type="package" version="1.8.1">py</requirement>
        <requirement type="package" version="1.19.1">pycairo</requirement>
        <requirement type="package" version="1.3">pydantic</requirement>
        <requirement type="package" version="2.4.7">pyparsing</requirement>
        <requirement type="package" version="5.12.3">pyqt</requirement>
        <requirement type="package" version="4.6.4">pytest</requirement>
        <requirement type="package" version="3.6.7">python</requirement>
        <requirement type="package" version="2.8.1">python-dateutil</requirement>
        <requirement type="package" version="3.6">python_abi</requirement>
        <requirement type="package" version="2020.1">pytz</requirement>
        <requirement type="package" version="5.3.1">pyyaml</requirement>
        <requirement type="package" version="0.12.0">qcelemental</requirement>
        <requirement type="package" version="5.12.5">qt</requirement>
        <requirement type="package" version="2020.03.3">rdkit</requirement>
        <requirement type="package" version="8.0">readline</requirement>
        <requirement type="package" version="0.22.1">scikit-learn</requirement>
        <requirement type="package" version="1.4.1">scipy</requirement>
        <requirement type="package" version="45.1.0">setuptools</requirement>
        <requirement type="package" version="0.7">simint</requirement>
        <requirement type="package" version="1.15.0">six</requirement>
        <requirement type="package" version="3.30.1">sqlite</requirement>
        <requirement type="package" version="2020.1">tbb</requirement>
        <requirement type="package" version="8.6.10">tk</requirement>
        <requirement type="package" version="6.0.4">tornado</requirement>
        <requirement type="package" version="4.46.1">tqdm</requirement>
        <requirement type="package" version="0.2.4">wcwidth</requirement>
        <requirement type="package" version="0.34.2">wheel</requirement>
        <requirement type="package" version="1.0.7">xorg-kbproto</requirement>
        <requirement type="package" version="1.0.10">xorg-libice</requirement>
        <requirement type="package" version="1.2.3">xorg-libsm</requirement>
        <requirement type="package" version="1.6.9">xorg-libx11</requirement>
        <requirement type="package" version="1.0.9">xorg-libxau</requirement>
        <requirement type="package" version="1.1.3">xorg-libxdmcp</requirement>
        <requirement type="package" version="1.3.4">xorg-libxext</requirement>
        <requirement type="package" version="0.9.10">xorg-libxrender</requirement>
        <requirement type="package" version="0.11.1">xorg-renderproto</requirement>
        <requirement type="package" version="7.3.0">xorg-xextproto</requirement>
        <requirement type="package" version="7.0.31">xorg-xproto</requirement>
        <requirement type="package" version="5.2.4">xz</requirement>
        <requirement type="package" version="0.2.5">yaml</requirement>
        <requirement type="package" version="3.1.0">zipp</requirement>
        <requirement type="package" version="1.2.11">zlib</requirement>
        <requirement type="package" version="1.4.4">zstd</requirement>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[
        #if $license_check
            ln -s '$molecule' mymol.mol2 &&

            #if  $charge
            -c $charge
            #end if

            parameterize --no-dihed --charge-type Gasteiger --seed 01 mymol.mol2
        #end if
    ]]>
    </command>

    <inputs>
        <param type="data" name="molecule" format="mol2" />
        <param name="charge" type="integer" optional="true" label="Global charge. Defauls to sum of partial charges."/>
        <param name="license_check" type="select" label="This software is for not-for-profit use, in case of doubt please contact info@acellera.com. I hereby accept the license of use (https://github.com/Acellera/htmd/blob/master/HTMD_LICENCE.txt)">
          <option value="false">I do not accept</option>
          <option value="true">I accept</option>
          <validator type="expression" message="You must accept the conditions first.">'fal' not in value</validator>
        </param>
    </inputs>
    <outputs>
        <data name="molout" format="mol2" from_work_dir="parameters/GAFF2/mol.mol2" />
        <data name="frcmod" format="frcmod" from_work_dir="parameters/GAFF2/mol.frcmod" />
        <data name="energies" format="txt" from_work_dir="parameters/GAFF2/energies.txt" />

    </outputs>
    <tests>
        <test>
            <param name="molecule" value="nilotinib.mol2"/>
            <param name="license_check" value="true"/>
            <output name="molout" file="mytest.mol2" compare="sim_size"/>
        </test>
    </tests>
    <help><![CDATA[
    Generates a .frcmod file for a given molecule provided as .mol2 file. This .frcmod file can be then used to build a ligand-protein system and run MD simulations.
        

    Check license conditions at: https://software.acellera.com/news/license.pdf

    A molecule in mol2 file format must be provided. The global charge can be also especified as an integer. If left empty, the sum of partial charges will be used.

    ]]></help>


    <citations>
        <citation type="doi">10.1021/acs.jcim.9b00439</citation>
    </citations>

</tool>
